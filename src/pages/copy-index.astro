---
import PlotFigure from "../components/PlotFigure.astro";
import Layout from "../layouts/Layout.astro";
import * as Plot from "@observablehq/plot";
import penguins from "../assets/penguins.json";
import Header from "../components/Header.astro";
import { Tabs, TabsList, TabsTab, TabsPanel } from 'accessible-astro-components'

const adelie = penguins.filter(d => d.species === "Adelie");
const chinstrap = penguins.filter(d => d.species === "Chinstrap");
const gentoo = penguins.filter(d => d.species === "Gentoo");
---

<Layout>
  <Header />

  <main class="container !p-8 !max-w-5xl !mx-auto">
    <h1 class="!text-3xl !font-extrabold !mb-6 !text-center !text-purple-700">
      Penguins par esp√®ce (onglets)
    </h1>

    <Tabs>
      <TabList class="!flex !justify-center !gap-4 !mb-6">
        <Tab selected class="!px-4 !py-2 !rounded-lg !bg-purple-700 !text-white !font-semibold hover:!bg-purple-800 focus:!outline-none">
          Adelie
        </Tab>
        <Tab class="!px-4 !py-2 !rounded-lg !bg-gray-200 !text-gray-700 !font-semibold hover:!bg-gray-300 focus:!outline-none">
          Chinstrap
        </Tab>
        <Tab class="!px-4 !py-2 !rounded-lg !bg-gray-200 !text-gray-700 !font-semibold hover:!bg-gray-300 focus:!outline-none">
          Gentoo
        </Tab>
      </TabList>

      <TabPanels>
        <TabPanel selected class="!bg-white !rounded-xl !p-6 !shadow-md">
          <h2 class="!text-xl !font-bold !mb-4 !text-purple-700">Adelie Penguins</h2>
          <PlotFigure
            options={{
              marks: [Plot.dot(adelie, { x: "culmen_length_mm", y: "culmen_depth_mm", stroke: "species" })],
            }}
          />
          <p class="!mt-4 !font-medium !text-purple-500">Number of Adelie Penguins: {adelie.length}</p>
        </TabPanel>

        <TabPanel class="!bg-white !rounded-xl !p-6 !shadow-md">
          <h2 class="!text-xl !font-bold !mb-4 !text-purple-700">Chinstrap Penguins</h2>
          <PlotFigure
            options={{
              marks: [Plot.dot(chinstrap, { x: "culmen_length_mm", y: "culmen_depth_mm", stroke: "species" })],
            }}
          />
          <p class="!mt-4 !font-medium !text-purple-500">Number of Chinstrap Penguins: {chinstrap.length}</p>
        </TabPanel>

        <TabPanel class="!bg-white !rounded-xl !p-6 !shadow-md">
          <h2 class="!text-xl !font-bold !mb-4 !text-purple-700">Gentoo Penguins</h2>
          <PlotFigure
            options={{
              marks: [Plot.dot(gentoo, { x: "culmen_length_mm", y: "culmen_depth_mm", stroke: "species" })],
            }}
          />
          <p class="!mt-4 !font-medium !text-purple-500">Number of Gentoo Penguins: {gentoo.length}</p>
        </TabPanel>
      </TabPanels>
    </Tabs>
  </main>
</Layout>
<style>
  .container {
    padding: 2rem;
    max-width: 1200px;
    margin: auto;
  }

  .title {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    text-align: center;
    color: #7c3aed;
  }

  .select-menu {
    display: block;
    margin: 0 auto 2rem auto;
    padding: 0.5rem 1rem;
    border: 2px solid #7c3aed;
    border-radius: 0.5rem;
    font-weight: 600;
    color: #7c3aed;
    background: white;
    cursor: pointer;
  }

  .select-menu:focus {
    outline: none;
    border-color: #a855f7;
  }

  /* Slider */
  .slider {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    gap: 2rem;
    padding-bottom: 1rem;
  }

  .slide {
    min-width: 100%;
    flex-shrink: 0;
    scroll-snap-align: start;
  }

  /* Carte */
  .card {
    background: white;
    border-radius: 1rem;
    padding: 2rem;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  }

  .card h2 {
    margin-bottom: 1rem;
    font-size: 1.5rem;
    color: #7c3aed;
  }

  .count {
    margin-top: 1rem;
    font-weight: 500;
    color: #a855f7;
  }
</style>
