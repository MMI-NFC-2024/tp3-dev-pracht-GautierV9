---
import Header from "../components/Header.astro";
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <Header />
  <h1 class="text-2xl font-extrabold mb-4 text-center" style="color:#7c3aed;">
    Penguins par esp√®ce (iframe)
  </h1>

  <select id="speciesIframe" class="select-menu">
    <option value="/species/Adelie">Adelie</option>
    <option value="/species/Chinstrap">Chinstrap</option>
    <option value="/species/Gentoo">Gentoo</option>
  </select>

  <iframe
    id="penguinFrame"
    src="/species/Adelie"
    style="width:100%; min-height:600px; border:1px solid #ccc; margin-top:1rem; transition:height 0.2s;"
    onload="resizeIframe(this)"
  ></iframe>

  <script>
    function resizeIframe(iframe) {
      try {
        setTimeout(() => {
          if (iframe.contentWindow && iframe.contentWindow.document.body) {
            const newHeight = iframe.contentWindow.document.body.scrollHeight;
            iframe.style.height = (newHeight > 600 ? newHeight : 600) + "px";
          }
        }, 150);
      } catch (e) {}
    }

    document.querySelector("#speciesIframe")?.addEventListener("change", (evt) => {
      const value = evt.target.value;
      document.querySelector("#penguinFrame").src = value; 
    });
  </script>
</Layout>

<style>
  .select-menu {
    display: block;
    margin: 0 auto 1.5rem auto;
    padding: 0.5rem 1rem;
    border: 2px solid #7c3aed;
    border-radius: 0.5rem;
    font-weight: 600;
    color: #7c3aed;
    background: white;
    cursor: pointer;
  }

  .select-menu:focus {
    outline: none;
    border-color: #a855f7;
  }
</style>